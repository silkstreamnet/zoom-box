!function(j){var s={boxWidth:"auto",boxHeight:"auto",boxLeft:"auto",boxTop:"auto",allowDrag:!0,imageSource:"auto",appendBoxTo:"body",fitBoxTo:window,alignBoxTo:window,boxId:"",boxClass:"",position:"fixed",onUpdateScale:!1},b=[];function f(o,t){var i=o.attr(t);return void 0===i?"":i}function d(o,t){"function"==typeof t.onUpdateScale&&t.onUpdateScale(t);var i=j("body"),e=!1;if(t.fitBoxTo==window&&(t.position="fixed")){e=!0;var a=i.width();i.css("overflow","hidden");var n=i.width();if(a<n){var r=parseInt(i.css("margin-right"))+(n-a);i.css("margin-right",r+"px")}}o.zbobj.css({top:"0",left:"0"}),"string"==typeof t.boxClass&&""!=t.boxClass&&o.zbobj.addClass(t.boxClass),"string"==typeof t.boxId&&""!=t.boxId&&o.zbobj.attr("id",t.boxId);var s=t.boxWidth,b=t.boxHeight,f=t.boxLeft,d=t.boxTop;"not set"!=s&&("auto"==s?(s=t.fitBoxTo==window?o.relativeFit.width():o.relativeFit.outerWidth(!1),o.zbobj.width(s)):s.match(/[0-9]{1,2}%/)?o.zbobj.css("width",s):o.zbobj.width(parseInt(s))),"not set"!=b&&("auto"==b?(b=t.fitBoxTo==window?o.relativeFit.height():o.relativeFit.outerHeight(!1),o.zbobj.height(b)):b.match(/[0-9]{1,2}%/)?o.zbobj.css("height",b):o.zbobj.height(parseInt(b)));var l=o.zbobj.offset(),c=o.relativeAlign.offset();"not set"!=f?"auto"==f?(f=t.alignBoxTo==window?"fixed"!=t.position&&0<l.left?-l.left:0:l.left==c.left?0:l.left>c.left?0-(l.left-c.left):c.left-l.left,o.zbobj.css("left",f+"px")):f.match(/[0-9]{1,2}%/)?o.zbobj.css("left",f):o.zbobj.css("left",parseInt(f)+"px"):o.zbobj.css("left",""),"not set"!=d?"auto"==d?(d=t.alignBoxTo==window?"fixed"!=t.position&&0<l.top?-l.top:0:l.top==c.top?0:l.top>c.top?0-(l.top-c.top):c.top-l.top,o.zbobj.css("top",d+"px")):d.match(/[0-9]{1,2}%/)?o.zbobj.css("top",d):o.zbobj.css("top",parseInt(d)+"px"):o.zbobj.css("top","");var g=t.naturalImgWidth,u=t.naturalImgHeight,h=o.zbobj.width(),m=o.zbobj.height(),p=g/h,v=u/m,z=g,x=u;(v<1||p<1)&&(p<v?x*=(z=h)/g:z*=(x=m)/u),o.zbimg.width(z),o.zbimg.height(x),e&&"fixed"!=t.position&&i.css("overflow",t.defaultBodyOverflow);var w=o.zbobj.offset();t.mouseX=w.left+o.zbobj.width()/2,t.mouseY=w.top+o.zbobj.height()/2,T(o,t)}function T(o,t){o.zbobj&&t&&!1===t.animator.timer&&function o(t,i){var e=Math.round(1e3/60),a=t.zbobj.width(),n=t.zbobj.height(),r=t.zbimg.width(),s=t.zbimg.height(),b=t.zbobj.offset(),f=t.zbimg.offset(),d=Math.round(-1*(i.mouseX-b.left)/a*(r-a)*100)/100,l=Math.round(-1*(i.mouseY-b.top)/n*(s-n)*100)/100,c=Math.round(100*parseFloat(f.left-b.left))/100,g=Math.round(100*parseFloat(f.top-b.top))/100,u=c,h=g;if(d!=c){var m=d-c,p=.1*(d-c);m<1&&-1<m&&(p=m),u=c+p,t.zbimg.css("left",u+"px")}if(l!=g){var v=l-g,z=.1*(l-g);v<1&&-1<v&&(z=v),h=g+z,t.zbimg.css("top",h+"px")}!1!==i.animator.timer&&(clearTimeout(i.animator.timer),i.animator.timer=!1),!1!==i.animator.timer||c==d&&g==l||(i.animator.timer=setTimeout(function(){o(t,i)},e))}(o,t)}var t=!(j.fn.ZoomBox=function(o){o=o||{};var t=j.extend({},s,o);!function(o,a){if(0<o.length){var t=j("body"),n=t.css("overflow"),r=t.css("margin-right");o.each(function(){var o,t,i=j(this),e=j.extend({},a);!function(o,t){for(var i in s)if(s.hasOwnProperty(i)){var e=f(o,"data-"+i.toLowerCase());e&&(t[i]=e)}}(i,e),e.imageSource="auto"==e.imageSource?f(i,"href"):e.imageSource,function(o,t){t.naturalImgWidth=0,t.naturalImgHeight=0;var i=new Image;i.src=o,i.onload=function(){t.naturalImgWidth=this.width,t.naturalImgHeight=this.height}}(e.imageSource,e),o=i,(t=e).zbid=b.length+1,t.animator={timer:!1,startTime:0},b.push({object:o,settings:t}),e.isopen=!1,e.defaultBodyOverflow=n,e.defaultMarginRight=r,i.click(function(o){o.preventDefault(),e.isopen||(!function(t){var o=j("body");t.defaultBodyOverflow=o.css("overflow"),t.defaultMarginRight=o.css("margin-right");var i=t.zbid,e=t.imageSource,a='<div class="zoom-box-container" data-zbid="'+i+'"><img src="'+e+'" alt="" /></div>',n={relativeHolder:"object"==typeof t.appendBoxTo&&t.appendBoxTo!=window?t.appendBoxTo:j(t.appendBoxTo),relativeFit:"object"==typeof t.fitBoxTo&&t.fitBoxTo!=window||!t.fitBoxTo?t.fitBoxTo:j(t.fitBoxTo),relativeAlign:"object"==typeof t.alignBoxTo&&t.alignBoxTo!=window||!t.alignBoxTo?t.alignBoxTo:j(t.alignBoxTo)};n.relativeHolder.length&&e&&0!=t.naturalImgWidth&&0!=t.naturalImgHeight&&(n.relativeHolder=n.relativeHolder.eq(0),n.relativeHolder.append(a),n.zbobj=n.relativeHolder.find('.zoom-box-container[data-zbid="'+i+'"]'),n.zbimg=n.zbobj.find("img"),n.zbobj.css({position:t.position,"z-index":"990",visibility:"hidden"}),n.zbimg.css({position:"absolute","z-index":"991","max-width":"none","max-height":"none"}),d(n,t),n.zbobj.css({visibility:"visible",overflow:"hidden",display:"none"}).fadeIn(400),n.zbimg.on("dragstart",function(o){o.preventDefault()}),n.zbobj.on("mousemove",function(o){t.mouseX=o.pageX,t.mouseY=o.pageY,T(n,t)}).on("touchmove",function(o){t.mouseX=o.originalEvent.touches[0].pageX,t.mouseY=o.originalEvent.touches[0].pageY,T(n,t)}).click(function(o){o.preventDefault(),t.isopen=!1,n.zbobj.fadeOut(400,function(){!function(o,t){o.zbobj.remove(),o={},delete b[t.zbid-1].zbobjects,!1!==t.animator.timer&&(clearTimeout(t.animator.timer),t.animator.timer=!1);j("body").css({overflow:t.defaultBodyOverflow,"margin-right":t.defaultMarginRight})}(n,t)})}),b[i-1].zbobjects=n)}(e),e.isopen=!0)})})}}(j(this),t)});j(window).resize(function(){0==t&&(t=!0,setTimeout(function(){for(var o=0;o<b.length;o++)void 0!==b[o].zbobjects&&d(b[o].zbobjects,b[o].settings);t=!1},100))});var i=!1;j(window).scroll(function(){0==i&&(i=!0,setTimeout(function(){for(var o=0;o<b.length;o++)void 0!==b[o].zbobjects&&d(b[o].zbobjects,b[o].settings);i=!1},100))})}(jQuery);