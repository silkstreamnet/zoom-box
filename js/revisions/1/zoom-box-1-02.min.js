!function(j){var b={boxWidth:"auto",boxHeight:"auto",boxLeft:"auto",boxTop:"auto",allowDrag:!0,imageSource:"auto",appendBoxTo:"body",fitBoxTo:window,alignBoxTo:window,boxId:"",boxClass:"",position:"fixed",closeText:"",onUpdateScale:!1},f=[];function l(o,t){var e=o.attr(t);return void 0===e?"":e}function d(o,t){if(o.zbobj){"function"==typeof t.onUpdateScale&&t.onUpdateScale(t);var e=j("body"),i=!1;if(t.fitBoxTo==window&&(t.position="fixed")){i=!0;var n=e.width();e.css("overflow","hidden");var a=e.width();if(n<a){var s=parseInt(e.css("margin-right"))+(a-n);e.css("margin-right",s+"px")}}o.zbobj.css({top:"0",left:"0"}),"string"==typeof t.boxClass&&""!=t.boxClass&&o.zbobj.addClass(t.boxClass),"string"==typeof t.boxId&&""!=t.boxId&&o.zbobj.attr("id",t.boxId);var r=t.boxWidth,b=t.boxHeight,f=t.boxLeft,l=t.boxTop;"not set"!=r&&("auto"==r?(r=t.fitBoxTo==window?o.relativeFit.width():o.relativeFit.outerWidth(!1),o.zbobj.width(r)):"string"==typeof r&&r.match(/[0-9]{1,2}%/)?o.zbobj.css("width",r):o.zbobj.width(parseInt(r))),"not set"!=b&&("auto"==b?(b=t.fitBoxTo==window?o.relativeFit.height():o.relativeFit.outerHeight(!1),o.zbobj.height(b)):"string"==typeof b&&b.match(/[0-9]{1,2}%/)?o.zbobj.css("height",b):o.zbobj.height(parseInt(b)));var d=o.zbobj.offset(),u=o.relativeAlign?o.relativeAlign.offset():0;"not set"!=f?"auto"==f?(f=t.alignBoxTo==window?"fixed"!=t.position&&0<d.left?-d.left:0:d.left==u.left?0:d.left>u.left?0-(d.left-u.left):u.left-d.left,o.zbobj.css("left",f+"px")):"string"==typeof f&&f.match(/[0-9]{1,2}%/)?o.zbobj.css("left",f):o.zbobj.css("left",parseInt(f)+"px"):o.zbobj.css("left",""),"not set"!=l?"auto"==l?(l=t.alignBoxTo==window?"fixed"!=t.position&&0<d.top?-d.top:0:d.top==u.top?0:d.top>u.top?0-(d.top-u.top):u.top-d.top,o.zbobj.css("top",l+"px")):"string"==typeof l&&l.match(/[0-9]{1,2}%/)?o.zbobj.css("top",l):o.zbobj.css("top",parseInt(l)+"px"):o.zbobj.css("top","");var c=t.naturalImgWidth,g=t.naturalImgHeight,m=o.zbobj.width(),p=o.zbobj.height(),h=c/m,v=g/p,z=c,x=g;(v<1||h<1)&&(h<v?x*=(z=m)/c:z*=(x=p)/g),o.zbimg.width(z),o.zbimg.height(x),i&&"fixed"!=t.position&&e.css("overflow",t.defaultBodyOverflow);var w=o.zbobj.offset();t.mouseX=w.left+o.zbobj.width()/2,t.mouseY=w.top+o.zbobj.height()/2,T(o,t)}}function T(o,t){o.zbobj&&t&&!1===t.animator.timer&&function o(t,e){var i=e.timeoutSpeed,n=t.zbobj.width(),a=t.zbobj.height(),s=t.zbimg.width(),r=t.zbimg.height(),b=t.zbobj.offset(),f=t.zbimg.offset(),l=-1*(e.mouseX-b.left)/n*(s-n),d=-1*(e.mouseY-b.top)/a*(r-a),u=s==n?0:-(s-n);0<=l?l=0:l<u&&(l=u);var c=r==a?0:-(r-a);0<=d?d=0:d<c&&(d=c);var g=parseFloat(f.left-b.left),m=parseFloat(f.top-b.top),p=g,h=m;if(l!=g){var v=l-g,z=.2*(l-g);v<1&&-1<v&&(z=v),p=Math.floor(10*(g+z))/10,t.zbimg.css("left",p+"px")}if(d!=m){var x=d-m,w=.2*(d-m);x<1&&-1<x&&(w=x),h=Math.floor(10*(m+w))/10,t.zbimg.css("top",h+"px")}!1!==e.animator.timer&&(clearTimeout(e.animator.timer),e.animator.timer=!1),!1!==e.animator.timer||g==l&&m==d||(e.animator.timer=setTimeout(function(){o(t,e)},i))}(o,t)}function u(o,t){t.isopen=!1,o.zbobj.fadeOut(400,function(){o.zbobj.remove(),o={},delete f[t.zbid-1].zbobjects,!1!==t.animator.timer&&(clearTimeout(t.animator.timer),t.animator.timer=!1),j("body").css({overflow:t.defaultBodyOverflow,"margin-right":t.defaultMarginRight})})}var t=!(j.fn.ZoomBox=function(o){o=o||{};var t=j.extend({},b,o);!function(o,n){if(0<o.length){var t=j("body"),a=t.css("overflow"),s=t.css("margin-right"),r=Math.round(1e3/30);o.each(function(){var o,t,e=j(this),i=j.extend({},n);!function(o,t){for(var e in b)if(b.hasOwnProperty(e)){var i=l(o,"data-"+e.toLowerCase());i&&(t[e]=i)}}(e,i),i.imageSource="auto"==i.imageSource?l(e,"href"):i.imageSource,function(o,t){t.naturalImgWidth=0,t.naturalImgHeight=0;var e=new Image;e.src=o,e.onload=function(){t.naturalImgWidth=this.width,t.naturalImgHeight=this.height}}(i.imageSource,i),o=e,(t=i).zbid=f.length+1,t.animator={timer:!1,startTime:0},f.push({object:o,settings:t}),i.isopen=!1,i.defaultBodyOverflow=a,i.defaultMarginRight=s,i.timeoutSpeed=r,i.mouseX=0,i.mouseY=0,i.mouseDownX=-999,i.mouseDownY=-999,e.click(function(o){o.preventDefault(),i.isopen||(!function(t){var o=j("body");t.defaultBodyOverflow=o.css("overflow"),t.defaultMarginRight=o.css("margin-right");var e=t.zbid,i="string"==typeof t.imageSource?t.imageSource:"",n="string"==typeof t.closeText?t.closeText:"",a='<div class="zoom-box-container" data-zbid="'+e+'"><a href="javascript:void(0);" class="zoom-box-close">'+n+'</a><img src="'+i+'" alt="" /></div>',s={relativeHolder:"object"==typeof t.appendBoxTo&&t.appendBoxTo!=window?t.appendBoxTo:j(t.appendBoxTo),relativeFit:"object"==typeof t.fitBoxTo&&t.fitBoxTo!=window||!t.fitBoxTo?t.fitBoxTo:j(t.fitBoxTo),relativeAlign:"object"==typeof t.alignBoxTo&&t.alignBoxTo!=window||!t.alignBoxTo?t.alignBoxTo:j(t.alignBoxTo)};i&&s.relativeHolder.length&&0!=t.naturalImgWidth&&0!=t.naturalImgHeight&&(s.relativeHolder=s.relativeHolder.eq(0),s.relativeHolder.append(a),s.zbobj=s.relativeHolder.find('.zoom-box-container[data-zbid="'+e+'"]'),s.zbimg=s.zbobj.find("img"),s.zbclose=s.zbobj.find("a.zoom-box-close"),s.zbobj.css({position:t.position,"z-index":"990",visibility:"hidden"}),s.zbimg.css({position:"absolute","z-index":"991","max-width":"none","max-height":"none"}),s.zbclose.css({position:"absolute","z-index":"992"}),d(s,t),s.zbobj.css({visibility:"visible",overflow:"hidden",display:"none"}).fadeIn(400),s.zbimg.on("dragstart",function(o){o.preventDefault()}),s.zbobj.on("mousemove",function(o){t.mouseX=o.pageX,t.mouseY=o.pageY,T(s,t)}).on("touchmove",function(o){o.preventDefault(),t.mouseX=o.originalEvent.touches[0].pageX,t.mouseY=o.originalEvent.touches[0].pageY,T(s,t)}).on("mousedown",function(o){o.preventDefault(),t.mouseDownX=o.pageX,t.mouseDownY=o.pageY}).on("mouseup",function(o){o.preventDefault();o.pageX<=t.mouseDownX+5&&o.pageX>=t.mouseDownX-5&&o.pageY<=t.mouseDownY+5&&o.pageY>=t.mouseDownY-5&&u(s,t),t.mouseDownX=-999,t.mouseDownY=-999}),s.zbclose.click(function(o){o.preventDefault(),u(s,t)}),f[e-1].zbobjects=s)}(i),i.isopen=!0)})})}}(j(this),t)});j(window).on("resize.zoombox",function(){0==t&&(t=!0,setTimeout(function(){for(var o=0;o<f.length;o++)void 0!==f[o].zbobjects&&d(f[o].zbobjects,f[o].settings);t=!1},100))});var e=!1;j(window).on("scroll.zoombox",function(){if(0==e){for(var o=0;o<f.length;o++)void 0!==f[o].zbobjects&&d(f[o].zbobjects,f[o].settings);e=!0,setTimeout(function(){for(var o=0;o<f.length;o++)void 0!==f[o].zbobjects&&d(f[o].zbobjects,f[o].settings);e=!1},10)}})}(jQuery);