!function(v){var a={boxWidth:"auto",boxHeight:"auto",boxLeft:"auto",boxTop:"auto",allowDrag:!0,imageSource:"auto",appendBoxTo:"body",fitBoxTo:window,alignBoxTo:window,boxId:"",boxClass:"",position:"absolute",onUpdateScale:!1},r=[];function n(o,t){var e=o.attr(t);return void 0===e?"":e}function s(o,t){"function"==typeof t.onUpdateScale&&t.onUpdateScale(t);var e=v("body"),i=e.css("overflow");t.fitBoxTo==window&&e.css("overflow","hidden"),o.zbobj.css({top:"0",left:"0"}),"string"==typeof t.boxClass&&""!=t.boxClass&&o.zbobj.addClass(t.boxClass),"string"==typeof t.boxId&&""!=t.boxId&&o.zbobj.attr("id",t.boxId);var a=t.boxWidth,n=t.boxHeight,b=t.boxLeft,r=t.boxTop;"not set"!=a&&("auto"==a?(a=t.fitBoxTo==window?o.relativeFit.width():o.relativeFit.outerWidth(!1),o.zbobj.width(a)):a.match(/[0-9]{1,2}%/)?o.zbobj.css("width",a):o.zbobj.width(parseInt(a))),"not set"!=n&&("auto"==n?(n=t.fitBoxTo==window?o.relativeFit.height():o.relativeFit.outerHeight(!1),o.zbobj.height(n)):n.match(/[0-9]{1,2}%/)?o.zbobj.css("height",n):o.zbobj.height(parseInt(n)));var s=o.zbobj.offset(),l=o.relativeAlign.offset();"not set"!=b?"auto"==b?(b=t.alignBoxTo==window?0<s.left?-s.left:0:s.left==l.left?0:s.left>l.left?0-(s.left-l.left):l.left-s.left,o.zbobj.css("left",b+"px")):b.match(/[0-9]{1,2}%/)?o.zbobj.css("left",b):o.zbobj.css("left",parseInt(b)+"px"):o.zbobj.css("left",""),"not set"!=r?"auto"==r?(r=t.alignBoxTo==window?0<s.top?-s.top:0:s.top==l.top?0:s.top>l.top?0-(s.top-l.top):l.top-s.top,o.zbobj.css("top",r+"px")):r.match(/[0-9]{1,2}%/)?o.zbobj.css("top",r):o.zbobj.css("top",parseInt(r)+"px"):o.zbobj.css("top","");var d=t.naturalImgWidth,f=t.naturalImgHeight,c=o.zbobj.width(),u=o.zbobj.height(),p=d/c,g=f/u,h=d,m=f;(g<1||p<1)&&(p<g?m*=(h=c)/d:h*=(m=u)/f),o.zbimg.width(h),o.zbimg.height(m),t.fitBoxTo==window&&e.css("overflow",i);var z=o.zbobj.offset();t.mouseX=z.left+o.zbobj.width()/2,t.mouseY=z.top+o.zbobj.height()/2,x(o,t)}function x(o,t){o.zbobj&&t&&!1===t.animator.timer&&function o(t,e){var i=Math.round(1e3/60),a=t.zbobj.width(),n=t.zbobj.height(),b=t.zbimg.width(),r=t.zbimg.height(),s=t.zbobj.offset(),l=t.zbimg.offset(),d=Math.round(-1*(e.mouseX-s.left)/a*(b-a)*100)/100,f=Math.round(-1*(e.mouseY-s.top)/n*(r-n)*100)/100,c=Math.round(100*parseFloat(l.left-s.left))/100,u=Math.round(100*parseFloat(l.top-s.top))/100,p=c,g=u;if(d!=c){var h=d-c,m=.1*(d-c);h<1&&-1<h&&(m=h),p=c+m,t.zbimg.css("left",p+"px")}if(f!=u){var z=f-u,v=.1*(f-u);z<1&&-1<z&&(v=z),g=u+v,t.zbimg.css("top",g+"px")}!1!==e.animator.timer&&(clearTimeout(e.animator.timer),e.animator.timer=!1),!1!==e.animator.timer||c==d&&u==f||(e.animator.timer=setTimeout(function(){o(t,e)},i))}(o,t)}var t=!(v.fn.ZoomBox=function(o){var t,i,e=v.extend({},a,o);t=v(this),i=e,0<t.length&&t.each(function(){var o,t,e=v(this),b=v.extend({},i);!function(o,t){for(var e in a)if(a.hasOwnProperty(e)){var i=n(o,"data-"+e.toLowerCase());i&&(t[e]=i)}}(e,b),b.imageSource="auto"==b.imageSource?n(e,"href"):b.imageSource,function(o,t){t.naturalImgWidth=0,t.naturalImgHeight=0;var e=new Image;e.src=o,e.onload=function(){t.naturalImgWidth=this.width,t.naturalImgHeight=this.height}}(b.imageSource,b),o=e,(t=b).zbid=r.length+1,t.animator={timer:!1,startTime:0},r.push({object:o,settings:t}),b.isopen=!1,e.click(function(o){var t,e,i,a,n;o.preventDefault(),b.isopen||(e=(t=b).zbid,i=t.imageSource,a='<div class="zoom-box-container" data-zbid="'+e+'"><img src="'+i+'" alt="" /></div>',(n={relativeHolder:"object"==typeof t.appendBoxTo&&t.appendBoxTo!=window?t.appendBoxTo:v(t.appendBoxTo),relativeFit:"object"==typeof t.fitBoxTo&&t.fitBoxTo!=window||!t.fitBoxTo?t.fitBoxTo:v(t.fitBoxTo),relativeAlign:"object"==typeof t.alignBoxTo&&t.alignBoxTo!=window||!t.alignBoxTo?t.alignBoxTo:v(t.alignBoxTo)}).relativeHolder.length&&i&&0!=t.naturalImgWidth&&0!=t.naturalImgHeight&&(n.relativeHolder=n.relativeHolder.eq(0),n.relativeHolder.append(a),n.zbobj=n.relativeHolder.find('.zoom-box-container[data-zbid="'+e+'"]'),n.zbimg=n.zbobj.find("img"),n.zbobj.css({position:t.position,"z-index":"990",visibility:"hidden"}),n.zbimg.css({position:"absolute","z-index":"991"}),s(n,t),n.zbobj.css({visibility:"visible",overflow:"hidden",display:"none"}).fadeIn(400),n.zbimg.on("dragstart",function(o){o.preventDefault()}),n.zbobj.on("mousemove",function(o){t.mouseX=o.pageX,t.mouseY=o.pageY,x(n,t)}).on("touchmove",function(o){t.mouseX=o.originalEvent.touches[0].pageX,t.mouseY=o.originalEvent.touches[0].pageY,x(n,t)}).click(function(o){o.preventDefault(),t.isopen=!1,n.zbobj.fadeOut(400,function(){var o;o=t,n.zbobj.remove(),delete r[o.zbid-1].zbobjects,!1!==o.animator.timer&&(clearTimeout(o.animator.timer),o.animator.timer=!1)})}),r[e-1].zbobjects=n),b.isopen=!0)})})});v(window).resize(function(){0==t&&(t=!0,setTimeout(function(){for(var o=0;o<r.length;o++)void 0!==r[o].zbobjects&&s(r[o].zbobjects,r[o].settings);t=!1},100))});var e=!1;v(window).scroll(function(){0==e&&(e=!0,setTimeout(function(){for(var o=0;o<r.length;o++)void 0!==r[o].zbobjects&&s(r[o].zbobjects,r[o].settings);e=!1},100))})}(jQuery);